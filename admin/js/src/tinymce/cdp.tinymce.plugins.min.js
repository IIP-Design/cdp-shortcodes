var form_cdp_base={width:500,height:220,editor:null,cacheReqs:{},debug:function(msg){if(console){if(_.isObject(msg)){console.dir(msg)}else{console.log(msg)}}},addShortcodeToEditor:function(data){var sc=this.shortcodeName.value.replace(/_/g,"-"),content="["+sc,value;$.each(data,function(name){value=data[name];if(_.isBoolean(value)){value=+value}content+=" "+name+'="'+value+'"'});content+=" ]";return content},ajax:function(func){return jQuery.ajax({type:"post",context:this,url:ajaxVars.url,dataType:"json",data:{action:func,security:ajaxVars.tinymceNonce}})},open:function(){if(this.action){if(this.cacheReqs[name]){this.openFormWindow(this.cacheReqs[name])}else{this.ajax(this.action).done(function(data){this.cacheReqs[name]=data;this.openFormWindow(data)}).fail(function(err){this.debug(err)})}}else{this.openFormWindow({})}},openFormWindow:function(data){var self=this;var args={title:"Add "+this.shortcodeName.text,body:this.getFields(data),width:this.width,height:this.height,onsubmit:function(e){tinyMCE.activeEditor.selection.setContent(self.addShortcodeToEditor(e.data))}};this.editor.windowManager.open(args)}};(function($){tinymce.PluginManager.add("cdp_shortcodes",function(editor){function getCDPShortcodeName(e){var shortcodeName={};if(e.control&&e.control.state){shortcodeName=e.control.state.data}return shortcodeName}function getListofCDPMenuItemsWrittenIntoFooter(){var shList=[];$.each(cdp_menu,function(i){shList.push({text:cdp_menu[i],value:i})});return shList}function openCDPShortcodeDialogue(e){var scn=getCDPShortcodeName(e);var form=Object.create(window["form_"+scn.value]);form.shortcodeName=scn;form.editor=editor;form.open()}editor.addButton("cdp_shortcode",{type:"listbox",text:"Add CDP Shortcode",values:getListofCDPMenuItemsWrittenIntoFooter(),onselect:function(e){openCDPShortcodeDialogue(e)}})})})(jQuery);var $=tinymce.dom.DomQuery;var form_cdp_article_feed=Object.create(window["form_cdp_base"]);form_cdp_article_feed.height=400;form_cdp_article_feed.action="fetch_data_cdp_article_feed";form_cdp_article_feed.getFields=function(data){var self=this;var fields=[{type:"form",padding:0,items:[{type:"container",items:this.getSites(data.sites),label:"Sites",name:"sites"},{type:"textbox",label:"How many posts to display:",name:"size",maxWidth:70,onPostRender:function(e){self.numbersOnly(e.target)}},{type:"textbox",label:"Post types:",name:"types",maxWidth:160},{type:"textbox",label:"Language:",name:"langs",maxWidth:160},{type:"textbox",label:"Tags:",name:"tags",maxWidth:160},{type:"textbox",label:"Categories:",name:"categories",maxWidth:160},{type:"textbox",label:"Orientation:",name:"ui-direction",maxWidth:160},{type:"textbox",label:"UI Style:",name:"ui-style",maxWidth:160}]}];return fields};form_cdp_article_feed.numbersOnly=function(obj){var el=obj.getEl();$(el).attr("type","number");$(el).attr("min","0")};form_cdp_article_feed.getSites=function(){return[{type:"checkbox",checked:true,text:"share.america.gov",name:"share"},{type:"checkbox",checked:true,text:"ylai.state.gov",name:"ylai"}]};var $=tinymce.dom.DomQuery;var form_cdp_course=Object.create(window["form_cdp_base"]);form_cdp_course.height=200;form_cdp_course.action="fetch_data_cdp_course";form_cdp_course.getFields=function(data){var self=this;var fields=[{type:"form",padding:0,items:[{type:"textbox",label:"Course ID:",name:"id",maxWidth:70,onPostRender:function(e){self.numbersOnly(e.target)}}]}];return fields};form_cdp_course.numbersOnly=function(obj){var el=obj.getEl();$(el).attr("type","number");$(el).attr("min","0")};
//# sourceMappingURL=./cdp.tinymce.plugins.min.js.map